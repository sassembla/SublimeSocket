{"name":"SublimeSocket","tagline":"API server for SublimeText","body":"<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">\r\n<html>\r\n<head><link rel=\"stylesheet\" type=\"text/less\" href=\"../stylesheets/less/default.less\"/><script type=\"text/javascript\" src=\"../javascripts/less-1.3.0.min.js\"></script>\r\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\r\n  <meta http-equiv=\"Content-Style-Type\" content=\"text/css\">\r\n  <title></title>\r\n  <meta name=\"Generator\" content=\"Cocoa HTML Writer\">\r\n  <meta name=\"CocoaVersion\" content=\"1187.37\">\r\n  <style type=\"text/css\">\r\n    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 22.0px 'Hiragino Kaku Gothic ProN'}\r\n    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Kaku Gothic ProN'; min-height: 18.0px}\r\n    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'}\r\n    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Kaku Gothic ProN'}\r\n    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 24.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #001e57; min-height: 36.0px}\r\n    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 24.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #001e57}\r\n    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'; background-color: #001e57; min-height: 27.0px}\r\n    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Hiragino Kaku Gothic ProN'; background-color: #ebebeb}\r\n    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}\r\n    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 24.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #9e3517; min-height: 36.0px}\r\n    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 24.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #9e3517}\r\n    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'; background-color: #9e3517; min-height: 27.0px}\r\n    p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 20.0px 'Hiragino Kaku Gothic ProN'}\r\n    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}\r\n    p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; background-color: #ebebeb}\r\n    p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 24.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #17546d; min-height: 36.0px}\r\n    p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 24.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #17546d}\r\n    p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'; background-color: #17546d; min-height: 27.0px}\r\n    p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #01546e}\r\n    p.p20 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #00546f}\r\n    p.p21 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #005470; min-height: 27.0px}\r\n    p.p22 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #005470}\r\n    p.p23 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #005471; min-height: 27.0px}\r\n    p.p24 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px 'Hiragino Kaku Gothic ProN'; color: #ffffff; background-color: #005471}\r\n    span.s1 {font: 12.0px Helvetica}\r\n    span.s2 {background-color: #ebebeb}\r\n    span.s3 {font: 12.0px 'Hiragino Kaku Gothic ProN'}\r\n    span.s4 {font: 18.0px Helvetica}\r\n    span.Apple-tab-span {white-space:pre}\r\n  </style>\r\n</head>\r\n<body>\r\n<p class=\"p1\"><b>SublimeSocket API Reference 0.8.7</b></p>\r\n<p class=\"p2\"><b></b><br></p>\r\n<p class=\"p3\"><b>Overview</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>SublimeTextのAPIを、WebSocket経由で実行するためのサーバです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>SublimeTextのプラグインとして実装されています。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>WebSocket(RFC6455)によって、Local, Remoteの環境と組み合わせて動作します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>文章中では、SublimeTextのことをST、SublimeSocketのことをSSと略機することがあります。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><b>用途</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>・SublimeSocketAPIを組み合わせてReactorをプログラミングし、ST上にログ情報を表示</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>・ST上での特定のアクションに応じてコンパイル処理を走らせる</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>・Remote環境のコンパイラとLocal環境のSTの連携</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>・端末上のWebSocketクライアントとSTの連携</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><b>想定している連携例</b></p>\r\n<p class=\"p4\"><b><span class=\"Apple-tab-span\">\t</span></b><span class=\"s1\"><img src=\"%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202013-04-05%2013.27.48.png\" alt=\"スクリーンショット 2013-04-05 13.27.48.png\"></span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>サーバ側から、Log、StackTrace、SublimeSocketAPIなどの文字列データをSublimeSocketへと送付</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>↓</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>SublimeSocketがデータ受信、API受付</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>↓</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>SublimeTextに表示、編集アシスト動作</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>SublimeTextからキーイベント発行</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>↓</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>SublimeSocket イベント着火</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>↓</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>SublimeSocketからサーバ上のコンパイラにコンパイルオーダー</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>↓</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>サーバ側でコンパイル</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>↓</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>…</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>Yes! Yes! Yes! ずっとSublimeTextのターン！！</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p5\"><b></b><br></p>\r\n<p class=\"p6\"><b>API記法について</b></p>\r\n<p class=\"p7\"><b></b><br></p>\r\n<p class=\"p2\"><b></b><br></p>\r\n<p class=\"p4\"><b>SSJSON (SublimeSocketJSON)</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>JSONに特定の文字列をつけて、APIの実行キーにしています。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>下記の文字で構成された文字列を受け取る事で、APIを実行します。</p>\r\n<p class=\"p2\"><b></b><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p8\">API_PREFIX = \"sublimesocket\"</p>\r\n<p class=\"p8\">API_PREFIX_SUB = \"ss\"</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>特にSublimeServer向けの情報である事を示すPrefixです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>ぱっと見で明示するために付いています。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>フルに書くのがめんどくさい場合、ssで済ます事が出来ます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p8\">API_DEFINE_DELIM = \"@\"<span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>ここから先がAPIのKey<span class=\"s1\">s</span> and Values、という事を示すデリミタです。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p8\">API_CONCAT_DELIM = \"-&gt;\"</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>API同士を接続するデリミタです。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>下記のように使用します。</p>\r\n<p class=\"p8\">ss@API-&gt;API-&gt;API</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>-&gt; で連結したAPIは、記述順を守って実行されます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p8\">ss@Command1:JSON</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p8\">ss@Command1:JSON-&gt;Command2:JSON-&gt;Command3:JSON,,,</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>JSON部分の内容は、各APIごとに必須パラメータ名、型が決められています。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>また、パラメータ無しのAPIは、JSON部分無しで実行する事が出来ます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p8\">ss@Command1</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><b>Sample API</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>下記は、STのログに \"Hello World\" を出すAPIのサンプルです。</p>\r\n<p class=\"p8\">ss@showAtLog:{\"message\":\"Hello World\"}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>色々なAPIを、SublimeSocket Test Console で試す事が出来ます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>CommandPalette -&gt; \"SublimeSocket: on &gt; open preference\" で、SublimeTextからSafariが起動します。</p>\r\n<p class=\"p9\"><img src=\"%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202013-04-04%2022.14.03.png\" alt=\"スクリーンショット 2013-04-04 22.14.03.png\"></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"s2\">ss@showAtLog:{\"message\":\"Hello World\"}</span>を入力したこの状態でInputを押すと、SublimeText内のコンソールに ss:Hello World と表示されているはずです。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"s1\"><img src=\"c.png\" alt=\"c.png\"></span></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p10\"><b></b><br></p>\r\n<p class=\"p11\"><b>API Reference</b></p>\r\n<p class=\"p12\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>checkAPICompatibility</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Client側から想定しているSSのVersionを入力し、SSのVersionとの整合性チェックを行います。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>このAPIの主な用途は、Clientごとの使用VersionとSSのAPIVersionとの整合性チェックを適宜行うためのFailSafeです。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"s1\">Ver</span>sionの不整合が発生した場合でも、messageを返送するのみで、挙動には影響しません。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>version[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Client側が想定しているVersionの文字列です。\"major.minor.changeLevel\"</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>strict[bool]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>チェックの厳格さフラグです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>trueの場合、minorバージョン未満の変更についても注意を発行します。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g.</p>\r\n<p class=\"p8\">ss@checkAPICompatibility:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"version\": \"0.0.1\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"strict\": true</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p8\">return = CAUTION:<span class=\"Apple-tab-span\">\t</span>The current version = 1.0.0, please check API for using SSJSON filter.:<span class=\"Apple-converted-space\"> </span></p>\r\n<p class=\"p2\"><b></b><br></p>\r\n<p class=\"p2\"><b></b><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>runSetting</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>テキストファイルとして保存されているAPIを読み込み、実行します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>path[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>読み込むファイルのパスです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SUBLIMESOCKET_PATH:と付ける事で、SublimeSocketフォルダ内を参照するようにショートカットができます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. /Users/someone/Desktop//UnityFilter.txt ファイルを読み込み、APIとして実行</p>\r\n<p class=\"p8\">ss@runSetting:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"path\": \"/Users/someone/Desktop/UnityFilter.txt\"</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>inputIdentity</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SublimeSocket WebSocketのコネクションに名前をつける事が出来ます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>id[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>コネクションに付ける名前です。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SSを中継して他Clientにメッセージを送る際などの宛名に使用します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. 送付元のClientのidをmyClientにする。</p>\r\n<p class=\"p8\">ss@inputIdentity:{\"id\":\"myClient\"}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>tearDown</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SSのWebSocket service を終了します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. SSのサーバを落とす。</p>\r\n<p class=\"p8\">ss@ tearDown</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>(バグがあり、socket自体はそのまま生存、address already use が出てしまう　2013/04/05 10:35:52)</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>setReactor</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SublimeSocketに対して、特定のEventが発生した場合に動く、Reactorをセットします。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>eventとtargetの組み合わせによって、特定のEventに対して複数の動作をセットすることが可能です。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>event[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>監視する対象のEvent名　\"on_modified\", \"on_selection_modified\", \"on_pre_save\", \"on_post_save\" など、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SublimeTextが発行するものと、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>\"ss_errorEmitted\", \"ss_f_noViewFound\" など、SublimeSocketが発行するものがセットできます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>target[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Reactorの識別に使用します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>異なるtargetを設定する事で、同じEventに対して複数のReactorをセットする事が出来ます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>selectors[JSONArray[JSONObject[string:any]]]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Event発生時に動作するAPIを記述できます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>記述はJSONの配列形式で、APIのCommand部分を文字列キーにしたJSonObjectが使えます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>interval[int]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>実行間隔の数値です。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>0であればセット直後に一度だけ対象Eventの発生をチェックします。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>0以外の正の数であれば、ミリ秒ごとに対象Eventの発生をチェックします。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>replacefromto[JSONObject[string:string]]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Reactor発生時、Eventの持つパラメータを、selectorで指定したAPIに適応させる事が出来ます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>{key:value}に対して、 Eventの持つkey名のパラメータの値を、selector内のvalue名のパラメータの値にします。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. 選択範囲が更新されたら、STのログにHello Worldと表示する。</p>\r\n<p class=\"p8\">ss@setReactor:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"target\": \"sublimesocketpreference\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"event\": \"on_selection_modified\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"selectors\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>\"containsRegions\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"view\": \"will be replace to specific view\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"target\": \"sublimesocketpreference\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"emit\": \"ss_errorEmitted\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"debug\": true</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>],</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"replacefromto\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>\"view\": \"view\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>},</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"interval\": 1000</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>setFoundationReactor</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>ST上で発生する特殊なEventに対してReactorをセットします。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Eventについては下記<b>EventReference</b>参照</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>event[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>対象Event名です。”ss_f_noViewFound”　などが該当します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>あるビュー(ファイル)に対する操作が発生したとき、そのビューが現在開かれていない際に発行されます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>条件があり、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>・defineFilterが定義済み</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>・そのfilterにヒットするfilteriingが流入し</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>・対象ビューが探知できなかった</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>場合に発生します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>selectors</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>replacefromto</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>同 setReactor</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. Reactorセット後、フィルタ定義をし、そのフィルタにヒットするも該当するビューが開かれていない場合、STログにHello Worldを出力する。</p>\r\n<p class=\"p8\">ss@setFoundationReactor:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"event\": \"ss_f_noViewFound\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"selectors\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>\"showAtLog\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"message\": \"Hello World\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>]</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p8\">-&gt;defineFilter:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"name\": \"04/04/13 23:30:08\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"patterns\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>\"something\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"selectors\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                    </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                        </span>\"showAtLog\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                            </span>\"message\": \"Hello World\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                    </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>]</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>]</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p8\">-&gt;filtering:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"name\": \"04/04/13 23:30:08\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"source\": \"something\"</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>kvs</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SS内のKey value storeを扱うAPIです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>内部的にはPythonの辞書で実装されています。　この機能の実装は、そのまま別のKVSへとすげ替える事を念頭に隔離して実装されています。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>showAll[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>全パラメータを文字列にSerializeしてClientへと返します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>valueの意味はありません。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>showValue[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>valueにしたパラメータをkeyに持つ値を返します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>辞書や配列の場合、Serializeしたものを返します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>removeValue[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>valueにしたパラメータをkvsから削除します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>clear[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>kvsを空にします。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>valueの意味はありません。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. kvsを空にする。</p>\r\n<p class=\"p8\">ss@kvs:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"clear\": \"true\"</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>defineFilter</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SSへとデータが流し込まれた際に反応するフィルタを定義します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>定義されたフィルタはkvsへと保存され、特定のデータに対して反応します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>name[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>フィルタをidentifyするための文字列です。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>filtering APIと合わせて使用します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>patterns[JSONArray[JSONObject[string:any]]]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>正規表現をkeyにしたJSONObjectの配列です。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>keyにマッチするデータが流入した場合、value内のselectorsがAPIとして発生します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>複数の正規表現を書いた場合、配列順に実行されます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>複数のフィルタにマッチすることを許します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. 2013/04/04 23:30:08 という名前で、somethingで始まるデータが流入した場合、STログにHello World を出力する。</p>\r\n<p class=\"p8\">ss@defineFilter:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"name\": \"04/04/13 23:30:08\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"patterns\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>\"^something\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"selectors\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                    </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                        </span>\"showAtLog\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                            </span>\"message\": \"Hello World\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                    </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>]</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>]</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>filtering</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SSへとデータを流し込むAPIです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>任意の文字列データをClientからSSへと流し込みます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>name[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>ターゲットとなるフィルタをidentifyする文字列です。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>事前にdefineFilterでセットされている必要があります。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>source[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>文字列データです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>APIの都合上、JSONで扱えない文字と、-&gt; (-と&gt;の連続) が入っている文字列を扱う事が出来ません。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>これらは事前にパースするとかでなんとかしてください。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>debug[bool]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>デバッグ用パラメータです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>セットされている場合はvalueに応じてデバッグ表示がSTのログに出力されます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. 2013/04/04 23:30:08 という名前が付けられたフィルタに対して、something という文字列を出力する。</p>\r\n<p class=\"p8\">ss@filtering:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"name\": \"04/04/13 23:30:08\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"source\": \"something\"</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>containsRegions</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>通常、setReactorに内包して使用します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>特定のview(STで開かれているファイル)について、Reactorが指定したEventが発生したタイミングで、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>エディタの選択範囲にSTのRegionが存在する場合、emitキーワードで指定したEventを発行します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>発行できるEventは、ss_errorEmitted\" など SublimeSocket定義のEventに限られます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Eventについては下記<b>EventReference</b>参照</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>view[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>viewのファイルのパスです。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>target[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>この文字列をtargetとして持つsetReactorへと、Eventを発行します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>emit[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Event名の文字列です。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>ss_errorEmitted などが指定できます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>debug[bool]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>デバッグ用パラメータです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>セットされている場合はvalueに応じてデバッグ表示がSTのログに出力されます。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g.<span class=\"Apple-converted-space\">  </span>ファイル /Users/USERNAME/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py に対して、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>10行目にRegionが表示されます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"s1\"><img src=\"%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202013-04-05%200.19.31.png\" alt=\"スクリーンショット 2013-04-05 0.19.31.png\"></span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>そのRegionをカーソルが選択範囲に含んだ際、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>sublimesocketpreference というtargetをもち、ss_errorEmitted Eventに反応するReactorに対して、Eventを発行します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>viewパラメータは something Reactorのreplacefromtoによって、on_selection_modifiedが発生したviewへと置き換えられます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Event発行後、ss_errorEmitted に反応するReactorが発生し、Hello WorldがSTのログに出力され、 appendRegionの内容が実行されます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"s1\"><img src=\"b.png\" alt=\"b.png\"></span></p>\r\n<p class=\"p8\">ss@setReactor:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"target\": \"sublimesocketpreference\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"event\": \"on_selection_modified\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"selectors\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>\"containsRegions\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"view\": \"will be replace to specific view\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"target\": \"sublimesocketpreference\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"emit\": \"ss_errorEmitted\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"debug\": true</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>],</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"replacefromto\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>\"view\": \"view\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>},</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"interval\": 1000</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p8\">-&gt;setReactor:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"target\": \"sublimesocketpreference\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"event\": \"ss_errorEmitted\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"selectors\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>\"showAtLog\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"message\": \"Hello World\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>]</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p8\">-&gt;appendRegion:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"view\": \"/Users/USERNAME/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"identity\": \"03/12/13 18:46:17\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"line\": 10,</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"message\": \"herecomes daredevil\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"condition\": \"keyword\"</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>collectViews</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>STが開いているviewを収集し、kvsに保存します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>特にパラメータはありません。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SS起動時に自動的に呼ばれます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>→SS起動時に自動的に実行されるAPIは、SSパッケージ内の SublimeSocket.sublime-settings に記述されています。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>\"loadSettings\" : [\"collectViews\"]</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. ST上で開いているviewを収集する。</p>\r\n<p class=\"p8\">ss@collectViews</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>runShell</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SSからPythonを経由してシェルスクリプトを実行します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>bashなどの環境変数は引き継がれません。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>main, delay, debug　以外の文字列 \"-a\" や \"something\" などは、 そのままコマンドラインで実行されます。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>☆shell実行する都合上、value側に含まれるスペースを含む文字列 \"a peaceful journey\" などは、spaceが_に変換されます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>他にも、\"[\" -&gt; \"\", \"]\" -&gt; \"\",<span class=\"Apple-converted-space\">  </span>\"@s@s@\" -&gt; \" \" へと変換が発生します。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>たとえばspaceを表示したい場合、SSへと入力する前の段階で、@s@s@ などに変換しておく必要があります。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>これは　\"　をエスケープして文字列を囲んだ場合でもきちんと発生します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>main[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>コマンドラインの先頭に入る文字列です。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>delay[int]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>指定ミリ秒後に実行します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>debug</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>デバッグ用パラメータです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>セットされている場合はvalueに応じてデバッグ表示がSTのログに出力されます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>上記以外のkey[any]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>value部分には、string, int, bool のほか、 JSONArray[any] の指定が可能です。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>JSONObject形式で書いた場合、順がシャッフルされる可能性に注意してください。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>また、key、valueともに、空文字の指定が可能です。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. ruby gems　\"terminal-notifier\"を実行します。文字列中のspaceは、_に強制的に変換されます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>JSONObject版　key value の内容が、コマンドラインのパラメータとして実行されます。key-valueペアの順は守られますが、ペア同士がどの順で記述されるかは未定義です。</p>\r\n<p class=\"p8\">ss@runShell:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"main\": \"terminal-notifier\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"-message\": \"\\\"Hello, this is my message\\\"\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"-title\": \"\\\"Message Title\\\"\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"-execute\": \"\\\"open -a 'Sublime Text 2.App'\\\"\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"debug\": true</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>JSONArray版　terminal-notifier -message \"Hello,_this_is_my_message\" -title \"Message_Title\" -execute \"open_-a_'Sublime Text 2.App'\" が実行されます。</p>\r\n<p class=\"p8\">ss@runShell:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"main\": \"terminal-notifier\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"-message\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>\"\\\"Hello, this is my message\\\"\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>\"-title\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>\"\\\"Message Title\\\"\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>\"-execute\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>\"\\\"open -a 'Sublime Text 2.App'\\\"\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>],</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"debug\": true</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>broadcastMessage/monocastMessage</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SSを介して、他のClientへとWebSocket経由でメッセージを飛ばします。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>target</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>monocastMessageの場合のみ有効な、送付先のIdentityです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>inputIdentity を使う事で、Client側が自己申告できます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>実行時点でSS上に存在しないidentityを指定した場合、エラーが発生します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>message[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Clientへと送付される文字列です。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>sender[stirng]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>オプションです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>送付元の情報をidentifyする事が出来ます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>このキーがあることで、Clientへと到達する情報は、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>senderのvalue:messageのvalue になります。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g.</p>\r\n<p class=\"p8\">ss@monocastMessage:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"message\": \"here comes Daredevil! for only one\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"target\": \"sublimesocketpreference\"</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>showAtLog</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>文字列をSTのログに出力します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>主にユーザーへの通知や、動作確認に使用します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>message[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>ログに出力される文字列です。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g.</p>\r\n<p class=\"p8\">ss@showAtLog:{\"message\":\"Hello World\"}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>appendRegion</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>STで現在開かれている特定のviewへと、Region<span class=\"s1\">(</span>四角形<span class=\"s1\">)</span>を表示します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>情報はkvsのSUBDICT_REGIONS下に保存されます。　eraseAllR<span class=\"s1\">e</span>gions が発生したタイミングで、削除されます。</p>\r\n<p class=\"p14\"><br></p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></span>メッセージ情報他を埋め込むことができます。</p>\r\n<p class=\"p14\"><br></p>\r\n<p class=\"p9\"><span class=\"Apple-tab-span\">\t</span>view[string]</p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></span>ファイル名を含む<span class=\"s1\">path</span>です。</p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></span>フルパスが存在する場合、そのままviewを特定する要素として使用されます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>フルパスでない場合、適当に推測します。</p>\r\n<p class=\"p14\"><br></p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></span>最低でもファイル名<span class=\"s1\">.</span>拡張子を含んでいる必要があります。</p>\r\n<p class=\"p14\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></span>該当する<span class=\"s1\">view</span>がSTの<span class=\"s1\">view</span>上に発見できなかった場合、”ss_f_noViewFound” Eventを発行します。</p>\r\n<p class=\"p14\"><br></p>\r\n<p class=\"p9\"><span class=\"Apple-tab-span\">\t</span>line[int]</p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Region</span>を表示する行番号です。</p>\r\n<p class=\"p14\"><br></p>\r\n<p class=\"p9\"><span class=\"Apple-tab-span\">\t</span>message</p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Region</span>に保存する文字列データです。</p>\r\n<p class=\"p14\"><br></p>\r\n<p class=\"p9\"><span class=\"Apple-tab-span\">\t</span>condition</p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>Region</span>のカラーリングを決定するパラメータです。</p>\r\n<p class=\"p9\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>ST<span class=\"s3\">の</span>Color Scheme<span class=\"s3\">と連動しています。</span></p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SS</span>では、適当ですが、 <span class=\"s1\">keyword</span> パラメータをError用、string パラメータをCaution用に使用しています。</p>\r\n<p class=\"p14\"><br></p>\r\n<p class=\"p4\"><span class=\"s1\"><span class=\"Apple-tab-span\">\t</span>e.g. </span>ファイル /Users/USERNAME/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py に対して、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>10行目にRegionが表示されます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"s1\"><img src=\"1__%23$!@%25!%23__%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202013-04-05%200.19.31.png\" alt=\"1__#$!@%!#__スクリーンショット 2013-04-05 0.19.31.png\"></span></p>\r\n<p class=\"p15\">ss@appendRegion:</p>\r\n<p class=\"p15\">{</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"view\": \"/Users/USERNAME/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py\",</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"identity\": \"03/12/13 18:46:17\",</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"line\": 10,</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"message\": \"herecomes daredevil\",</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"condition\": \"keyword\"</p>\r\n<p class=\"p15\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>notify</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>MacのNotificationCenterを起動し、任意の文字列を表示します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"s1\"><img src=\"%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202013-04-05%201.08.12.png\" alt=\"スクリーンショット 2013-04-05 1.08.12.png\"></span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>title[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>タイトル用の文字列です。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>message[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>メッセージ用の文字列です。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>\"_\"を\" \"(<span class=\"s1\">space</span>)に勝手に変換します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>debug</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>デバッグ用パラメータです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>セットされている場合はvalueに応じてデバッグ表示がSTのログに出力されます。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g.</p>\r\n<p class=\"p8\">ss@notify:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"title\": \"title-is-here\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"message\": \"message-of-nyaaa\"</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>補記：<span class=\"Apple-tab-span\">\t</span>Linux、Windowsのことは考えずに作りましたが、下記サンプルでgrowlでの通知が可能です。</p>\r\n<p class=\"p8\">ss@runShell:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"main\": \"/usr/local/bin/growlnotify\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"-m\": \"message!\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"-t\": \"Saved!\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"-a\": \"\\\"Sublime Text 2\\\"\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"debug\": true</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p16\"><b></b><br></p>\r\n<p class=\"p17\"><b>Event Reference</b></p>\r\n<p class=\"p18\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>各Eventについて、setReactor APIでReactorをセットする事が出来ます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>setReactorでcaptureできる各Eventが保持するパラメータについては、各Eventの項を確認してください。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p19\"><b>SublimeText-Event</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>SublimeTextから発生するEventは下記になります。 発生タイミングなどの詳細は、同名のSublimeTextの<span class=\"s1\">API Reference</span>を参考にしてください。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><span class=\"Apple-tab-span\">\t</span><b>on_selection_modified, <span class=\"Apple-converted-space\"> </span></b></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>on_pre_save,<span class=\"Apple-converted-space\"> </span></b></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>on_post_save,<span class=\"Apple-converted-space\"> </span></b></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>on_modified</b></p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>これらのEventは、Reactorのinterval指定に従って発生判定を行っています。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>一定時間内に複数回発生したとしても、最後に発生したEventのみが、intervalに合わせて処理されます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>REACTIVE_INTERVAL_EVENT<span class=\"Apple-tab-span\">\t</span>= [\"on_modified\", \"on_selection_modified\", \"on_pre_save\", \"on_post_save\"]</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><b><span class=\"Apple-tab-span\">\t</span>Event params</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>すべてのEventが下記paramを発行します。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>setReactorでは下記paramをreplacefromtoで転用可能。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p9\"><span class=\"s3\"><span class=\"Apple-tab-span\">\t</span>view</span>[sublimetext_view_instance]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SublimeText view</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>viewId[int]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SublimeText<span class=\"Apple-converted-space\">  </span>view.view.id()</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>bufferId[int]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SublimeText view.buffer_id()</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>path[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SublimeText view.file_name()</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>basename[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>os.path.basename(view.file_name())</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>vname[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SublimeText view.name()</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p20\"><span class=\"s4\"><b>Sub</b></span><b>limeSocket-Event</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>SublimeSocketから発生するEventは下記になります。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><b><span class=\"Apple-tab-span\">\t</span>foundation series</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>emitなどで発行することは不可能です。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><b><span class=\"Apple-tab-span\">\t</span>ss_f_noViewFound</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>appendRegion API使用時、該当のviewがSTのview内に存在しない場合に発行されます。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>発生したタイミングで、Reactorが反応します。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>message[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>view[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>line[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>condition[string]</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>パラメータはすべて、appendRegion APIへと入力された値が使用されます。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. パラメータ例</p>\r\n<p class=\"p15\">{</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"view\": \"/Users/USERNAME/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py\",</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"identity\": \"03/12/13 18:46:17\",</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"line\": 10,</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"message\": \"herecomes daredevil\",</p>\r\n<p class=\"p15\"><span class=\"Apple-converted-space\">    </span>\"condition\": \"keyword\"</p>\r\n<p class=\"p15\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><b><span class=\"Apple-tab-span\">\t</span>user-emittable series</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>emitがあるAPI経由で発行することが可能です。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>すべてのEventは、emit元が持つパラメータを持ちます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>各Eventの差は、identityのみです。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><span class=\"Apple-tab-span\">\t</span><b>ss_eventEmitted</b></p>\r\n<p class=\"p4\"><b><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></b>containsRegions API のemitに指定できるEventです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>setReactorで反応する要素をセットしておく事で、対応するEventに対してのみ反応することができます。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p13\"><span class=\"Apple-tab-span\">\t</span><b>ss_errorEmitted</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>containsRegions API のemitに指定できるEventです。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>setReactorで反応する要素をセットしておく事で、対応するEventに対してのみ反応することができます。</p>\r\n<p class=\"p2\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p21\"><b></b><br></p>\r\n<p class=\"p22\"><b>saveなどのユーザー動作と組み合わせたEventの例</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>・setReactorでユーザーの on_post_save を監視</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>→発生時に動作するEventをselectorに定義</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. setReactorを使い、on_post_save Event発生時に、Hello World とSTのログへと出力します。</p>\r\n<p class=\"p8\">ss@setReactor:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"target\": \"sublimesocketpreference\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"event\": \"on_post_save\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"selectors\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>\"showAtLog\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"message\": \"Hello World\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>],</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"interval\": 1000</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><b></b><br></p>\r\n<p class=\"p23\"><b></b><br></p>\r\n<p class=\"p24\"><b>ユーザーによる範囲選択動作とRegionの選択を組み合わせたEventの例</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>・setReactorでユーザーの on_selection_modified Event を監視</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>→selector中で、containsRegions API をセット、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>該当するview範囲に既設のRegionが含まれているかどうかチェックし、</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>適当なEventをemit</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>・setReactorで上記セットしたEventを監視</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>→selector中で任意の動作を行う</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>e.g. <span class=\"Apple-tab-span\">\t</span>appendRegionで実際にRegionを発生させるサンプル。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>on_selection_modifiedに反応するReactor内で、既設のRegionへの反応を記述。範囲がRegionを含んでいた場合、ss_errorEmitted Eventを発行。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>ss_errorEmitted Eventが発行された場合、対応するReactorにて、showAtLogが発生する。</p>\r\n<p class=\"p8\">ss@setReactor:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"target\": \"sublimesocketpreference\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"event\": \"on_selection_modified\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"selectors\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>\"containsRegions\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"view\": \"will be replace to specific view\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"target\": \"sublimesocketpreference\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"emit\": \"ss_errorEmitted\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"debug\": true</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>],</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"replacefromto\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>\"view\": \"view\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>},</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"interval\": 1000</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p8\">-&gt;setReactor:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"target\": \"sublimesocketpreference\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"event\": \"ss_errorEmitted\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"selectors\": [</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>\"showAtLog\": {</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">                </span>\"message\": \"Hello World\"</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">            </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">        </span>}</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>]</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p8\">-&gt;appendRegion:</p>\r\n<p class=\"p8\">{</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"view\": \"/Users/sassembla/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"identity\": \"03/12/13 18:46:17\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"line\": 10,</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"message\": \"herecomes daredevil\",</p>\r\n<p class=\"p8\"><span class=\"Apple-converted-space\">    </span>\"condition\": \"keyword\"</p>\r\n<p class=\"p8\">}</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><b>サンプルフィルタ</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>いくつか、サンプルのフィルタがあります。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>TypeScript用のフィルタ</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span><span class=\"Apple-tab-span\">\t</span>SublimeSocket/FilterSettingSamples/TypeScriptFilter.txt</p>\r\n<p class=\"p2\"><b><span class=\"Apple-tab-span\">\t</span></b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>tscが出力するログに対して、エラー行を表示しています。</p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>すべてフィルタやReactorで書かれています。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>API runSettingで読み込むとそのまま使える状態ですので、がんばってみてください。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p9\"><b>Tool</b></p>\r\n<p class=\"p4\"><span class=\"Apple-tab-span\">\t</span>色々ある。書き足す。</p>\r\n<p class=\"p2\"><br></p>\r\n<p class=\"p2\"><br></p>\r\n</body>\r\n</html>\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}