<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>SublimeSocket Preferences</title>
    <meta charset="UTF-8" />
    <link href="../resource/css/bootstrap.min.css" rel="stylesheet">

    <script type="text/javascript">
      

      var setter = {
        set : function (input) {
          //set params
          document.getElementById('send').value = input;
        }
        
      }
      
      var _WS = {

        //websoket port (will be replaced by SublimeSocket plugin)
        uri: 'ws://SUBLIMESOCKET_HOST:SUBLIMESOCKET_PORT/',
        
        ws: null,

        init : function (e) {
          _WS.s = new WebSocket(_WS.uri);
          _WS.s.onopen = function (e) { _WS.onOpen(e); };
          _WS.s.onclose = function (e) { _WS.onClose(e); };
          _WS.s.onmessage = function (e) { _WS.onMessage(e); };
          _WS.s.onerror = function (e) { _WS.onError(e); };
        },

        onOpen: function () {
          _WS.writeLog('<span class="label label-success">RESPONSE:CONNECTED</span>');

          //call api then get callback
          _WS.s.send('sublimesocket@inputIdentity:{\"id\":\"sublimesocketpreference\"}');
        },

        onClose: function () {
          _WS.writeLog('<span class="label label-important">RESPONSE:DISCONNECTED</span>');
        },

        onMessage: function (e) {
          _WS.writeLog('<span class="label label-success">RESPONSE: ' + e.data + '</span>');
        },

        onError: function (e) {
          _WS.writeLog('<span style="color: red;">ERROR:</span> ' + e.data);
        },


        //Methods
        /*
        write textlist
        */
        writeLog: function (message) {
            var childNodes = document.getElementById('output').childNodes;
            var p = document.createElement('p');
            p.style.wordWrap = 'break-word';
            p.innerHTML = message.toString();
            document.getElementById('output').insertBefore(p, childNodes[0]);
        },
        send: function (message) {
          if (!message.length) {
            alert('Empty message not allowed !');
          } else {
            _WS.writeLog('<span class="label label-info">SEND: ' + message + '</span>');
            _WS.s.send(message);
          }
        },
        close: function () {//no one call
          _WS.writeLog('<span class="label">CLOSED</span>');
          _WS.s.close();
        },
        openNewPage: function (message) {
          var api_pageOpen = "ss@openPage:{\"identity\": \""+message+"\"}";
          _WS.s.send(api_pageOpen);
        }
      };

      window.addEventListener('load', _WS.init, false);

    </script>
  </head>
                                                                                   
  <body>
    <div class="container">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <script src="../resource/js/bootstrap.min.js"></script>
      
      <div id="header">
        <h2 class="offset1">SublimeSocket Preferences Console <a href="../doc/reference/SUBLIMESOCKET_VERSION.html">->apiref SUBLIMESOCKET_VERSION</a> 


            <div class="input-append"><input id="pageName" type="text" value="new" /><button class="btn" type="button" onclick="_WS.openNewPage(document.getElementById('pageName').value);"/>open page</button></div> </h2>

      </div>

      <div class="row offset1">
        <div class="input-append">
          <input class="span9" id="send" type="text" value="" />
          <button class="btn" type="button" onclick="_WS.send(document.getElementById('send').value);"/>input</button>
          <button type="submit" class="btn btn-danger" onclick="_WS.send('sublimesocket@tearDown');"> 
          Stop
          </button>

        </div>
        
        <div>
          <select multiple="multiple" class="span9 offset2" style="height:280px" onchange="setter.set(this[this.selectedIndex].value)">
            <option>
ss@特定のIdentityでページを開く/openPage:
{
    "identity": "06_10_13_14_32_08"
}
            </option>
            <option>
ss@グラフを書く/monocastMessage:
{
    "target": "sublimesocketgraph",
    "message": "100"
}
->monocastMessage:
{
    "target": "sublimesocketgraph",
    "message": "101"
}
->monocastMessage:
{
    "target": "sublimesocketgraph",
    "message": "102"
}
->monocastMessage:
{
    "target": "sublimesocketgraph",
    "message": "103"
}
            </option>
            <option>
ss@同じフィルタにヒットする複数のログが吐き出された場合に複数回ヒットする/defineFilter:
{
    "name": "06/09/13 12:23:07",
    "patterns": [
        {
            "^some": {
                "selectors": [
                    {
                        "showAtLog": {
                            "message": "should be thing:groups[0] in filterSource[] twice!"
                        }
                    }
                ]
            }
        }
    ]
}
->filtering:
{
    "name": "06/09/13 12:23:07",
    "source": "something\nsomething",
    "debug":true
}
->assertTrue:
{
    
}
            </option>
            <option>
ss@特定の文字列を含んだ要素をnotifyすると吹っ飛ぶ、不揃いな'だ。消そう。/notify:
{
    "title": "title-is-here",
    "message": "The variable `targetTransform' is declared but never used"
}
            </option>
            <option>
ss@複数行のsoureceに対して、複数のフィルタが個別に対応するのが確認できる/defineFilter:
{
    "name": "06/08/13 13:35:54",
    "patterns": [
        {
            "^some(.*)": {
                "selectors": [
                    {
                        "showAtLog": {
                            "message": "should be thing:groups[0] in filterSource[]"
                        }
                    }
                ]
            }
        },
        {
            "^el(.*)": {
                "selectors": [
                    {
                        "showAtLog": {
                            "message": "should be se:groups[0]"
                        }
                    }
                ]
            }
        }
    ]
}
->filtering:
{
    "name": "06/08/13 13:35:54",
    "source": "something\nelse\nother\npattern",
    "debug":true
}
            </option>
            <option>
ss@複数行のfilterに対応、3行目の要素からtheを取り出す/defineFilter:
{
    "name": "06/07/13 19:10:53",
    "patterns": [
        {
            "^something\nelse\no(.*)r": {
                "selectors": [
                    {
                        "showAtLog": {
                            "message": "should be the:groups[0] in filterSource[]"
                        }
                    }
                ]
            }
        }
    ]
}
->showAtLog:
{
    "message": "defined,"
}
->filtering:
{
    "name": "06/07/13 19:10:53",
    "source": "something\nelse\nother",
    "debug":true
}
            </option>
            <option>
ss@独自定義のイベントを定義、発行する/setReactor:
{
    "target": "05/27/13 21:15:42",
    "event": "event_05/27/13 21:15:58",
    "selectors": [
        {
            "monocastMessage": {
                "message": "eventEmit over.",
                "target": "sublimesocketpreference"
            }
        }
    ]
}
->eventEmit:
{
    "target": "05/27/13 21:15:42",
    "event": "event_05/27/13 21:15:58"
}
            </option>
            <option>
ss@デリミタをセットしたmonocastMessage,broadcastMessage/monocastMessage:
{
    "delimiter": "uno",
    "header": "THE HEADER for 1",
    "message": "replace",
    "footer": "THE FOOTER for 1",
    "target": "sublimesocketpreference"  
}
->broadcastMessage:
{
    "delimiter": "duo",
    "header": "THE HEADER for all",
    "message": "replace",
    "footer": "THE FOOTER for all"
}
            </option>
            <option>
ss@ヘッダー、フッター付きmonocastMessage、broadcastMessage/monocastMessage:
{
    "header": "THE HEADER for 1",
    "message": "replace",
    "footer": "THE FOOTER for 1",
    "target": "sublimesocketpreference"  
}
->broadcastMessage:
{
    "header": "THE HEADER for all",
    "message": "replace",
    "footer": "THE FOOTER for all"
}
            </option>
            <option>
ss@特定のファイルのデータを読んで、monocastに載せる/readFileData:
{
    "path": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/PythonSwitch.py"
}
->(data|message)monocastMessage:
{
    "message": "replace",
    "target": "sublimesocketpreference",
    "data": "will be entered"
}
            </option>
            <option>
ss@現在のWindowのファイルリストを送る。が、ST2だとスレッドの関係で直前のものになってしまう。/setWindowBasePath:{}
->getAllFilePath:
{
    "header": "header:",
    "anchor": "readme.txt",
    "footer": "footer",
    "paths": "will be entered"
}
->(paths|message)monocastMessage:
{
    "message": "replace",
    "target": "sublimesocketpreference"   
}
            </option>
            <option>
ss@Send Japanese/monocastMessage:
{
    "message": "日本語でおk",
    "target": "sublimesocketpreference"
}
            </option>
            <option>
ss@(deprecated)Send multibyte message./runSetting:
{
     "path": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/FilterSettingSamples/MultiLanguageFilter.txt"
}
            </option>
            <option>
ss@When selection changed, runWithBuffer will raise./setReactor:
{
    "target": "sublimesocketpreference",
    "event": "ss_f_runWithBuffer",
    "replacefromto": {
        "body": "message"
    },
    "selectors": [
        {
            "monocastMessage": {
                "message": "replace",
                "target": "sublimesocketpreference"
            }
        }
    ]
}
->setReactor:
{
    "target": "sublimesocketpreference",
    "event": "on_selection_modified",
    "selectors": [
        {
            "runWithBuffer": {
                "view": "will be replace to specific view"
            }
        }
    ],
    "replacefromto": {
        "view": "view"
    },
    "interval": 100
}
            </option>
            <option>
ss@When save, message show at log./setReactor:
{
    "target": "sublimesocketpreference",
    "event": "on_post_save",
    "selectors": [
        {
            "showAtLog": {
                "message": "Hello World"
            }
        }
    ],
    "interval": 1000
}
            </option>

            <option>
ss@3 バージョンの精査、apiVersion majorが一致、minorが低いのでクライアントのUpdateを勧められる+突破/versionVerify:
{
    "socketVersion": 3,
    "apiVersion": "1.-1.0"
}
            </option>

            <option>
ss@3 バージョンの精査、apiVersion majorが一致、minorが一致、verifyの突破/versionVerify:
{
    "socketVersion": 3,
    "apiVersion": "1.0.0"
}
            </option>
            <option>
ss@3 バージョンの精査、apiVersion majorが一致、minorが高いので、SSをupdateするアドレスを渡して切断/versionVerify:
{
    "socketVersion": 3,
    "apiVersion": "1.1.0"
}
            </option>

            <option>
ss@3 バージョンの精査、apiVersion majorが低いので、クライアント側へとupdateを求めるシグナル+切断/versionVerify:
{
    "socketVersion": 3,
    "apiVersion": "0.0.0"
}
            </option>
            <option>
ss@3 バージョンの精査、apiVersion majorが高いので、SSをupdateするアドレスを渡して切断/versionVerify:
{
    "socketVersion": 3,
    "apiVersion": "2.0.0"
}
            </option>
            


            <option>
ss@2 バージョンの精査、apiVersion majorが一致、minorが低いのでクライアントのUpdateを勧められる+突破/versionVerify:
{
    "socketVersion": 2,
    "apiVersion": "1.-1.0"
}
            </option>

            <option>
ss@2 バージョンの精査、apiVersion majorが一致、minorが一致、verifyの突破/versionVerify:
{
    "socketVersion": 2,
    "apiVersion": "1.0.0"
}
            </option>
            <option>
ss@2 バージョンの精査、apiVersion majorが一致、minorが高いので、SSをupdateするアドレスを渡して切断/versionVerify:
{
    "socketVersion": 2,
    "apiVersion": "1.1.0"
}
            </option>

            <option>
ss@2 バージョンの精査、apiVersion majorが低いので、クライアント側へとupdateを求めるシグナル+切断/versionVerify:
{
    "socketVersion": 2,
    "apiVersion": "0.0.0"
}
            </option>
            <option>
ss@2 バージョンの精査、apiVersion majorが高いので、SSをupdateするアドレスを渡して切断/versionVerify:
{
    "socketVersion": 2,
    "apiVersion": "2.0.0"
}
            </option>
            <option>
ss@2 バージョンの精査、socketVersionが合わないので、SSをupdateするアドレスを渡して切断/versionVerify:
{
    "socketVersion": 1,
    "apiVersion": "1.0.0"
}
            </option>

            <option>
ss@2 Set foundation event. forget usage./setFoundationReactor:
{
    "event": "ss_f_noViewFound",
    "selectors": [
        {
            "showAtLog": {
                "message": "Hello World"
            }
        }
    ]
}
->defineFilter:
{
    "name": "04/04/13 23:30:08",
    "patterns": [
        {
            "something": {
                "selectors": [
                    {
                        "showAtLog": {
                            "message": "Hello World"
                        }
                    }
                ]
            }
        }
    ]
}
->filtering:
{
    "name": "04/04/13 23:30:08",
    "source": "something"
}
            </option>

            <option>
ss@Notify on Mac./notify:
{
    "title": "title-is-here",
    "message": "message-of-nyaaa"
}
            </option>
            <option>
ss@Define filter, then "a" and "b" happen. will be ignored./defineFilter:
{
    "name": "03/15/13 04:02:56",
    "patterns": [
        {
            "something": {
                "selectors": [
                    {
                        "a": {}
                    },
                    {
                        "b": {}
                    }
                ]
            }
        }
    ]
}
->filtering:
{
    "name": "03/15/13 04:02:56",
    "source": "something"
}
            </option>
            <option>
ss@eraseAllRegion: {}
            </option>
            <option>
ss@Add region then erase./appendRegion:
{
    "view": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py",
    "identity": "03/12/13 18:46:17",
    "line": 10,
    "message": "herecomes daredevil",
    "condition": "keyword"
}
->eraseAllRegion: {}
            </option>
            <option>
ss@Add region on line 10, show log message when select the region./setReactor:
{
    "target": "sublimesocketpreference",
    "event": "on_selection_modified",
    "selectors": [
        {
            "containsRegions": {
                "view": "will be replace to specific view",
                "target": "sublimesocketpreference",
                "emit": "event_eventEmitted",
                "debug": false
            }
        }
    ],
    "replacefromto": {
        "view": "view"
    },
    "interval": 1000
}
->setReactor:
{
    "target": "sublimesocketpreference",
    "event": "event_eventEmitted",
    "selectors": [
        {
            "showAtLog": {
                "message": "Hello World"
            }
        }
    ]
}
->appendRegion:
{
    "view": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py",
    "identity": "03/12/13 18:46:17",
    "line": 10,
    "message": "herecomes daredevil",
    "condition": "keyword"
}
            </option>

            <option>
ss@Append region to Settings.py on line 11./appendRegion:
{
    "view": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py",
    "identity": "03/12/13 18:46:17",
    "line": 11,
    "message": "herecomes daredevil",
    "condition": "keyword"
}
            </option>

            <option>
ss@Append region to Settings.py on line 12./appendRegion:
{
    "view": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py",
    "identity": "03/12/13 18:46:17",
    "line": 12,
    "message": "herecomes daredevil",
    "condition": "keyword"
}
            </option>

            <option>
ss@(deprecated)Run terminal-notifier, focus to ST2./runShell:
{
    "main": "terminal-notifier",
    "-message": "\"Hello, this is my message\"",
    "-title": "\"Message Title\"",
    "-execute": "\"open -a 'Sublime Text 2.App'\"",
    "debug": true
}
            </option>
            <option>
ss@(deprecated)Run terminal-notifier notify./runShell:
{
    "main": "terminal-notifier",
    "-message": [
        "\"Hello, this is my message\"",
        "-title",
        "\"Message Title\"",
        "-execute",
        "\"open -a 'Sublime Text 2.App'\""
    ],
    "debug": true
}
            </option>

            <option>
ss@(deprecated)Run growl notify./runShell:
{
    "main": "/usr/local/bin/growlnotify",
    "-m": "message!",
    "-t": "Saved!",
    "-a": "\"Sublime Text 2\"",
    "debug": true
}
            </option>

            <option>
ss@Show message at log./showAtLog:
{
    "message": "herecomes daredevil"
}

            </option>

            <option>
ss@Fail sample pattern. - and > never be concat./filtering:
{
    "name": "invalidJSONTest",
    "source": "Loading GUID <-> Path mappings ... 0.000279 seconds."
}
            </option>

            <option>
ss@フィルタ定義、フィルタを2連続で流すが、eraseを含んでいるため最後の物だけ表示が出る/defineFilter:
{
    "name": "appendRegionFilter",
    "patterns": [
        {
            ".py.*[(]([0-9].*?),.*:(.*)": {
                "selectors": [
                    {
                        "eraseAllRegion": {}
                    },
                    {
                        "appendRegion": {
                            "line": "groups[0]",
                            "message": "message is filterSource[]",
                            "view": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py",
                            "condition": "keyword"
                        }
                    }
                ]
            }
        }
    ]
}
->filtering: 
{
    "name": "appendRegionFilter",
    "source": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py(29,12): error CS1519: Unexpected symbol `void' in class, struct, or interface member declaration",
    "debug": true
}
->filtering: 
{
    "name": "appendRegionFilter",
    "source": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/SublimeSocketAPISettings.py(19,12): error CS1519: Unexpected symbol `void' in class, struct, or interface member declaration",
    "debug": true
}
            </option>

            <option>
ss@Define filter "s", then show message on dialog after filtering run./defineFilter:
{
    "name": "s",
    "patterns": [
        {
            "(.*)": {
                "selectors": [
                    {
                        "eval": [
                            "sublime.message_dialog('groups[0], filterSource[]')"
                        ]
                    }
                ]
            }
        }
    ]
}
->filtering:
{
    "name": "s",
    "source": "somepattern"
}
            </option>

            <option>
ss@Run filter named "s"./filtering:
{
    "name": "s",
    "source": "test"
}
            </option>

            <option>
ss@Monocast message, will react message to this browser./monocastMessage:
{
    "message": "here comes Daredevil! for only one",
    "target": "sublimesocketpreference"
}
            </option>

            <option>
ss@Broadcast message, will react message to everywhere./broadcastMessage:
{
    "message": "here comes Daredevil!"
}
            </option>

            <option>
ss@Show all keys and values in KVS./kvs:
{
    "showAll": "true"
}
            </option>

            <option>
ss@Show value in KVS named "clientId"./kvs:
{
    "showValue": "clientId"
}
            </option>

            <option>
ss@Remove value from KVS named "clientId"./kvs:
{
    "removeValue": "clientId"
}
            </option>

            <option>
ss@Clear KVS./kvs:
{
    "clear": "true"
}
            </option>
            

            <option>
ss@Run setting on folder./runSetting:
{
    "path": "/Users/highvision/Library/Application Support/Sublime Text 2/Packages/SublimeSocket/FilterSettingSamples/UnityFilter.txt"
}
            </option>

            <option>
ss@Define filter only./defineFilter:
{
    "name": "s",
    "patterns": [
        {
            "-----CompilerOutput:-stdout--exitcode: (.+?)--.": {
                "selectors": [
                    {
                        "eval": [
                            "sublime.message_dialog('onlySetFilter groups[0]')"
                        ]
                    }
                ]
            }
        }
    ]
}   
            </option>

            <option>
ss@Set filter for specific case, then show dialog by run case with filter/defineFilter:
{
    "name": "s",
    "patterns": [
        {
            "-----CompilerOutput:-stdout--exitcode: (.+?)--.": {
                "selectors": [
                    {
                        "eval": [
                            "sublime.message_dialog('singleParam filterSource[]')",
                            "sublime.message_dialog('singleParamgroups[0]')",
                            "sublime.message_dialog('2param groups[0], filterSource[]')",
                            "sublime.message_dialog('multiparam groups[0], filterSource[], groups[0], filterSource[]')"
                        ]
                    }
                ]
            }
        }
    ]
}
->filtering:
{
    "name": "s",
    "source": "-----CompilerOutput:-stdout--exitcode: 1--compilationhadfailure: True--outfile: Temp/Assembly-CSharp.dll"
}
            </option>

            <option>
ss@Define filter, then status message coming by running filter. /defineFilter:
{
    "name": "s",
    "patterns": [
        {
            "-----CompilerOutput:-stdout--exitcode: (.+?)--.": {
                "selectors": [
                    {
                        "showStatusMessage": {
                            "message": "herecomes! filterSource[]"
                        }
                    }
                ]
            }
        }
    ]
}
->filtering:
{
    "name": "s",
    "source": "-----CompilerOutput:-stdout--exitcode: 1--compilationhadfailure: True--outfile: Temp/Assembly-CSharp.dll"
}
            </option>

            <option>
ss@When selection modified, event_errorEmittedRun./setReactor:
{
    "target": "sublimesocketpreference",
    "event": "on_selection_modified",
    "selectors": [
        {
            "containsRegions": {
                "view": "will be replace to specific view",
                "target": "sublimesocketpreference",
                "emit": "event_errorEmitted",
                "debug": true
            }
        }
    ],
    "replacefromto": {
        "view": "view"
    },
    "interval": 100
}
            </option>

            <option>
ss@When modified, broadCastMessage./setReactor:
{
    "target": "02/20/13 16:53:35",
    "event": "on_modified",
    "selectors": [
        {
            "broadcastMessage": {
                "message": "text's been modified!"
            }
        }
    ],
    "interval": 100
}
            </option>

            <option>
ss@Show dialog on SublimeText./eval:
[
    "sublime.message_dialog('show dialog from WebSocket Client')"
]
            </option>
            
            <option>
ss@Add region to CurrentFile's line 20./eval:
[
    "self.getLineCount_And_SetToArray(active_view, 20, lines)",
    "regions.append(active_view.line(lines[0]))",
    "active_view.add_regions('hereComes', regions, 'comment', 'dot', sublime.DRAW_OUTLINED)"
]
            </option>

          </select>
        </div>
        
        
      </div>
      
    </div>
    
    <div id="output" class="offset2 span7"></div>


  </body>
</html>